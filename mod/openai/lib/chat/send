
___x_cmd_openai_chat___start(){
    :
}

___x_cmd_openai_request_generaxwtecontent(){
    local content="$1"
    local model="$2"
    local apikey=;   local proxy=;
    # Default value
    ___x_cmd_openai_cur apikey:= model:= proxy:= 2>/dev/null
    model="${model:-gpt-4-1106-preview}" #gpt-4-1106-preview #gpt-3.5-turbo # gpt-4    #gpt-3.5-turbo

    [ -n "$apikey" ] || {
        openai:error "Please setting up your apikey first ==> 'x openai --cfg apikey=<your apikey>'"
        return 1
    }

    openai:debug --content "$content"

    # TODO: Need to json quote the content
    # LANG=en_US.UTF-8 LC_ALL=en_US.UTF-8
    x curl \
        ${proxy:+-x} ${proxy:+"$proxy"}                 \
        -sS https://api.openai.com/v1/chat/completions  \
        -H "Content-Type: application/json"             \
        -H "Authorization: Bearer $apikey"              \
        -d "$content" # | tee result.json
}


