# shellcheck shell=bash disable=SC2034,SC2154
# shellcheck disable=SC2039,3043



xrc:mod:lib fjo     \
    repo/pr/ls  repo/pr/info  repo/pr/create  repo/pr/edit  repo/pr/merge repo/pr/view



___x_cmd_fjo_repo_pr(){
    param:subcmd ___x_cmd_fjo_repo_pr            \
        "ls"                "list pull requests"    \
        "info|i"            "pull request info"     \
        "create"            "create pull request"   \
        "edit|ed"           "update pull requests"  \
        merge               "merge pull requests"
    param:subcmd:try
    param:run


    ___x_cmd_fjo_repo_pr _param_help_doc
    return 1
}



_____x_cmd_fjo_pr_ui_utils()(
    if [ -n "$ENFORCE_JSON" ] || [ -n "$json" ]; then
        ___x_cmd_cmds_cat
        ___x_cmd_fjo_http_error
        return
    fi

    local data
    local msg
    local error_msg
    case "$1" in
        Info)
            data="url=.html_url state=.state title=.title body=.body"
            msg="Successfully obtained PR information"
            error_msg="Failed to get PR information"
            ;;
        Creating)
            data="url=.html_url state=.state title=.title body=.body"
            msg="Successfully obtained PR information"
            error_msg="Failed to get PR information"
            ;;
        Edit)
            data="url=.html_url state=.state title=.title body=.body"
            msg="Edit PR success"
            error_msg="Failed to Edit PR"
            ;;
    esac
    eval x jo env . id=.id fjo_resp_err=.message "$data"
    if [ -n "$id" ]; then
        ___x_cmd_ui_tf true "$msg" ${url+"Url: $url"}  ${state+"State: $state"} ${title+"Title: $title"} ${body+"Body: $body"}
    else
        ___x_cmd_ui_tf false "$error_msg"
        ___x_cmd_fjo____handle_resp
        return 1
    fi
)
