# shellcheck shell=bash disable=SC2034,SC2154
# shellcheck disable=SC2039,3043
xrc:mod:lib     fjo     \
                team/repo/add   \
                team/repo/edit  \
                team/repo/info  \
                team/repo/rm    \
                team/repo/ls

___x_cmd_fjo_team_repo(){
    param:subcmd ___x_cmd_fjo_team_repo                                                     \
        ls              "Lists a team's repositories visible to the authenticated user."    \
        info            "List a particular repo of team"                                    \
        add             "Add repository to team"                                            \
        edit            "Update the team's permissions to the repository"                   \
        rm              "rm org team repo"
    param:subcmd:try
    param:run


    ___x_cmd_fjo_team_repo _param_help_doc
    return 1
}


___x_cmd_fjo_team_repo____ui_handler(){
    if  [ -n "$ENFORCE_JSON" ] || [ -n "$json" ]; then
        ___x_cmd_cmds_cat
        ___x_cmd_fjo_http_error
        return
    fi
    (
        local msg
        local error_msg
        case "$1" in
            Info)
                ___x_cmd jo env . id=.id url=.html_url fjo_resp_err=.message \
                    full_name=.full_name visibility=.visibility
                msg="get repo $name info success"
                error_msg="Fail. Couldn't find any repo: ${name}"
                ;;
            Creating|Update)
                ___x_cmd jo env . id=.id url=.html_url fjo_resp_err=.message
                msg="$1 repo $name  success"
                error_msg="$1 repo failure: $name."
                ;;
        esac

        if [ -n "$id" ]; then
            ___x_cmd_ui_tf true "$msg" "repo_id: $id" ${full_name+"name: $full_name"}  ${url+"url: $url"} ${owner+"repo_owner: $owner"}
        else
            ___x_cmd_ui_tf false "$error_msg"
            ___x_cmd_fjo____handle_resp
            return 1
        fi
    )
}

