# shellcheck shell=bash disable=2016

___x_cmd_chat_advise___provider_list(){
    ___x_cmd_chat_provider_ls
}

___x_cmd_chat_advise___model_list(){
    local provider="$1"
    [ -n "$provider" ] || {
        local IFS=" "
        local compline="${COMP_LINE:-${COMP_WORDS[*]}}"
        case "$compline" in
            *\ openai\ *)   provider=openai     ;;
            *\ gemini\ *)   provider=gemini     ;;
            *\ mistral\ *)  provider=mistral    ;;
            *\ moonshot\ *) provider=moonshot   ;;
            *\ ollama\ *)   provider=ollama     ;;
            *\ llmf\ *)     provider=llmf       ;;
        esac
    }

    [ -n "$provider" ] || {
        local x_=; ___x_cmd_chat_provider get_ || return
        provider="$x_"
    }
    ___x_cmd_chat_provider___validate "$provider" 2>/dev/null || return

    {
        case "$provider" in
            openai)
                printf "%s\n" gpt-4o gpt-4-turbo gpt-3.5-turbo ;;
            gemini)
                ___x_cmd gemini model ls --csv | ___x_cmd_cmds awk -v FS=, 'NR>1{ if ($0 ~ "generateContent" ) print $1; }' ;;
            ollama)
                ___x_cmd ollama ls | ___x_cmd_cmds awk -v FS=, 'NR>1{ print $1; }' ;;
            mistral|moonshot)
                ___x_cmd "$provider" model ls --csv | ___x_cmd_cmds awk -v FS=, 'NR>1{ print $1; }' ;;
            llmf)
                xrc llmf; ___x_cmd_llmf_advise___ls_model ;;
        esac
    } 2>/dev/null
}

