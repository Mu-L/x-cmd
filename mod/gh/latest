# shellcheck shell=sh                   # xrc
# shellcheck disable=SC2039,3043

# author:       Li Junhao           l@x-cmd.com

xrc param ui tmpl
xrc ui/lib/table

xrc:inner:lib gh utils resource config token repo/index repo/apply/index repo/branch/index current user/index org/index \
    repo/collaborator/index repo/pr/index _type/index org/membership team/main team/repo org/repo org/apply repo/release/index webhook/index \
    action/index action/workflows action/run action/job issue/index

x log init gh

___x_cmd_gh(){
    param:advise gh
    param:subcmd ___x_cmd_gh                    \
        repo        "repo command"              \
        current     "set current owner, repo"   \
        org         "manage org"                \
        user        "user"                      \
        config      "save, get, which"          \
        issue       "issue manage"              \
        action      "github action manage"      \
        team        "team management"           \
        token       "set token"
    param:subcmd:try

    param:subcmd ___x_cmd_gh_repo           \
        pr          "pull request management"
    param:subcmd:try
    param:run

    ___x_cmd_gh _param_help_doc
    return 1
}
[ -d "$HOME/.x-cmd/.tmp/gh" ] || mkdir -p "$HOME/.x-cmd/.tmp/gh"
xrc setmain ___x_cmd_gh