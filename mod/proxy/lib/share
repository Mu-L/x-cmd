# shellcheck shell=dash

___x_cmd_proxy___config(){
    [ $# -gt 0 ] ||     set -   --help
    
    local op="$1";  shift
    case "$op" in
        set|get|run)
            ___x_cmd_proxy___config_"$op" "$@" ;;
    esac
}

___X_CMD_PROXY_CONFIG_PATH="$___X_CMD_ROOT_DATA/proxy/config"

___x_cmd_proxy___config___fp_(){
    x mkdirp "$___X_CMD_PROXY_CONFIG_PATH"
    x_="$___X_CMD_PROXY_CONFIG_PATH/$1"
}

___x_cmd_proxy___config_set(){
    local x_
    ___x_cmd_proxy___config___fp_ "$1"
    printf "%s\n" "$2" > "$x_"
}

___x_cmd_proxy___config_get(){
    local ___x_cmd_proxy___config___fp_ "$1"
    x rat_ "$x_"
}

___x_cmd_proxy___config_run(){
    local fp="$1";  shift
    
    local x_
    ___x_cmd_proxy___config_get "$fp"
    ___x_cmd_proxy_run "$x_" -- "$@"
}
