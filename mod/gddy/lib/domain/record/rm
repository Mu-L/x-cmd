# shellcheck shell=dash disable=SC2034,SC2154


# https://developer.godaddy.com/doc/endpoint/domains#/v1/recordDeleteTypeName
___x_cmd_gddy_domain_record_rm(){
    param:scope     ___x_cmd_gddy
    param:dsl    '
options:
    #1             "Domain whose DNS Records are to be deleted"                    <>
    --shopper_id   "Shopper ID which owns the domain"                              <>=""
    --type         "DNS Record Type for which DNS Records are to be deleted"       <>=""  = A AAAA CNAME MX NS SOA SRV TXT
    --name         "DNS Record Name for which DNS Records are to be deleted"       <>

    --yes          "Ignore remove prompt interception"
    --json|-j      "output raw JSON data"
'
    param:run
    [ -z "$id" ] || local header="-H 'X-Shopper-Id: $id'"

    [ "$yes" = "true" ] || ___x_cmd_ui_yesno "Are you sure to delete dns record for the specified domain with the  $(___x_cmd_ui bold red "$type") and  $(___x_cmd_ui bold red "$name") ?" || return

    if [ -n "$json" ] || [ -n "$ENFORCE_JSON" ] ; then
        ___x_cmd_gddy_curl del "/v1/domains/$1/records/${type}/${name}"
    else
        local err_code=
        ___x_cmd_gddy_curl del "/v1/domains/$1/records/${type}/${name}" | x jo env err_code=.code

        if  ! ___x_cmd_gddy_http_error; then
            ___x_cmd_ui_tf false "Domain delete Dns failure [error code=$err_code]"
            return 1
        else
            ___x_cmd_ui_tf true "[Success]: Domain delete Dns successful"
        fi
    fi
}

