
___x_cmd_fslock_available(){
    local fslock_name="$1"

    local fslock_fp="${___X_CMD_FSLOCK_ROOT}/${fslock_name}.fslock.x-cmd.X"

    [ -e "$fslock_fp" ] || return 0

    local pidline="";
    local fingerprint="";

    {
        read -r pidline
        read -r fingerprint
    } <"$fslock_fp"

    if [ -z "$pidline" ]; then
        fslock:error "fslock[$fslock_name] pidline is empty"
        ___x_cmd_fslock_clearall "$fslock_name"
        return 0
    fi

    if ! x ps fingerprint check "$pidline" "$fingerprint"; then
        ___x_cmd_fslock_clearall "$fslock_name"
        return 0
    fi

    return 1
}
