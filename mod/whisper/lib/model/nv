# shellcheck shell=dash

___x_cmd_whisper_model_nv(){
    x csv app --end ___x_cmd_whisper_model_nv___ --return local-var --clear < "${___X_CMD_ROOT_MOD}"/whisper/lib/model/model.csv
}

___x_cmd_whisper_model_nv___(){
    [ -n "${___X_CMD_CSV_APP_DATA_name}" ] || return 1
    # Choose the value.
    # Setting the value as default model ?

    local selected="${___X_CMD_CSV_APP_DATA_name}"

    ___x_cmd_whisper_model_default setifnull "$selected"

    local x_=""
    local ___X_CMD_VAL_O=whisper/model
    ___x_cmd_val_default_get_ 2>/dev/null || true

    local id

    x ui select id "Next"   \
       "Setting the default model as $selected" \
       "EXIT"

    case "$id" in
        1)  x whisper model default set "$selected" ;;
        *)  return
    esac
    if [ -n "$x_" ]; then
        whisper:info "Current default model is $x_"
    else
        whisper:info "Current default model is undefined"
    fi
}
