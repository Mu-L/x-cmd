
___x_cmd_llmf_serve(){
    [ "$#" -gt 0 ]      ||   set - --help

    local host=""
    local port=""
    local model=""
    local mmproj=""

    while [ $# -gt 0 ]; do
        case "$1" in
            -h|--help)
                x help -m llmf serve
                return 1
                ;;

            -m|--model)     model="$2";         shift 2 ;;
            --mmproj)       mmproj="$2";        shift 2 ;;

            -p|--port)      port="$2";          shift 2 ;;
            --host)         host="$2";          shift 2 ;;

            --)             shift;              break ;;
            *)              break ;;
        esac
    done

    [ -z "$model" ]  || {
        [ -f "$model" ] || {
            model="$(___x_cmd_llmf model which "$model")"   || return
        }
        set -- "$@" --model "$model"
    }

    [ -z "$mmproj" ] || {
        [ -f "$mmproj" ] || {
            mmproj="$(___x_cmd_llmf model which "$mmproj")" || return
        }
        set -- "$@" --mmproj "$mmproj"
    }

    [ -z "$host" ]   || set -- "$@" --host "$host"
    [ -z "$port" ]   || set -- "$@" --port "$port"

    ___x_cmd cosmo llamafile "$@"
}

