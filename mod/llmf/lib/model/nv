# shellcheck shell=sh disable=SC3043

# using a csv app

# Using ls_remote
___x_cmd_llmf_model_nv(){
    local model=
    local x_=""; ___x_cmd_llmf_model_ls___app_ || return
    model="$x_"
    [ "$model" ] || return
    local id=
    ___x_cmd ui select id "Next"   \
       "Setting the default [model=$model]" \
       "Download the [model=$model]" \
       "Remove the [model=$model] file" \
       "EXIT" || return

    case "$id" in
        1)
            ___x_cmd_llmf_model_default set "$model" || return

            ___x_cmd_llmf_model_exist "$model" || {
                llmf:info "cmd -> \`x llmf model download $model\`"
                if ___x_cmd ui yesno "Do you want to download [mode=$model] ?"; then
                    ___x_cmd_llmf_model_download "$model" || return
                fi
            }
            ;;
        2)  ___x_cmd_llmf_model_download "$model" || return ;;
        3)  ___x_cmd_llmf_model_remove "$model" || return ;;
        *)  return ;;
    esac

    x_=; ___x_cmd_llmf_model_default get_
    llmf:info "Current default model is ${x_:-"undefined"}"
}
